<h3><%= t('general.profile') %></h3>

<%= simple_form_for(resource, :as => resource_name, :url => profile_path, :html => { :method => :put, :class => 'form-horizontal left', }) do |f| %>
  <%= f.error_notification %>
  <%= f.input :email, :required => true %>
  <div class="inputs">
    <%= f.input :name, :autofocus => true %>
    <%= f.input :attachment_id, :as => :hidden %>
  </div>
  <div class="inputs">
    <%= f.input :notification_donated, :as => :boolean %>
    <%= f.input :notification_new_comment, :as => :boolean %>
  </div>
  <div class="actions">
    <%= f.button :submit, t('general.update') %>
  </div>
<% end %>
<div class='right'>
  <%= image_tag resource.avatar, :width => 300, :id => :avatar_image %>
  <%= link_to t('general.change_photo'), '#', :id => 'upload_button'  %>
</div>

<div class='clear'>
</div>

<h3><%= t('general.change_password') %></h3>

<%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put, :class => 'form-horizontal' }) do |f| %>
  <div class="inputs">
    <%= f.input :password, :autocomplete => "off", :hint => "leave it blank if you don't want to change it", :required => false %>
    <%= f.input :password_confirmation, :required => false %>
    <%= f.input :current_password, :hint => "we need your current password to confirm your changes", :required => false %>
  </div>
  <div class="actions">
    <%= f.button :submit, t('general.change_password') %>
  </div>
<% end %>

<%= link_to t('general.back'), projects_path %>

<%
   attachment = current_user.attachment ||  Attachment.new
%>
<%= content_for :javascript_code do %>
    PhotoUpload.initialize('<%= attachment_url(attachment) %>');
<% end %>